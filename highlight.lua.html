<!doctype html><html><head>
  <meta charset=utf-8>
  <title>Reference</title>
  <link href="style.css" rel="stylesheet" type="text/css"></meta>

</head><body>
  <div id=content>
<h1> Simple Syntax Highlighting</h1><p><div class=turnable>
  <input id=code-folder type=checkbox>
  <label for=code-folder>View source-code</label>
  <div><pre id=folded-code style=width:inherit>
<span class=comment>--- Simple Syntax Highlighting</span><br><br><span class=keyword>local</span>&nbsp;M&nbsp;<span class=operator>=</span>&nbsp;<span class=operator>{</span><span class=operator>}</span><br><br><span class=comment>--- Wrap corresponding parts of Lua-Code with HTML-Spans of the classes</span><br><span class=comment>-- <span class=string>'comment'</span>, <span class=string>'string'</span>, <span class=string>'escape'</span>, <span class=string>'operator'</span> and <span class=string>'keyword'</span>. Does not really</span><br><span class=comment>-- work with multiline comments or multiline strings, everything else should</span><br><span class=comment>-- be fine.</span><br><span class=comment>--[=[</span><br><span class=keyword>local</span>&nbsp;highlight&nbsp;<span class=operator>=</span>&nbsp;require&nbsp;<span class=string>"highlight"</span><br><br><span class=keyword>return</span>&nbsp;highlight.highlight<span class=operator>(</span>&nbsp;<span class=operator>[</span><span class=operator>[</span><br>&nbsp;&nbsp;&nbsp;<span class=keyword>function</span>&nbsp;get<span class=operator>(</span>table,&nbsp;key<span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=keyword>return</span>&nbsp;table<span class=operator>[</span>key<span class=operator>]</span><br>&nbsp;&nbsp;&nbsp;<span class=keyword>end</span><br><span class=operator>]</span><span class=operator>]</span>&nbsp;<span class=operator>)</span><br><span class=operator>]</span><span class=operator>=</span><span class=operator>]</span><span class=comment>--@RUN</span><br><span class=keyword>function</span>&nbsp;M.highlight<span class=operator>(</span>string<span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=keyword>local</span>&nbsp;inserts&nbsp;<span class=operator>=</span>&nbsp;<span class=operator>{</span><span class=operator>}</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=keyword>local</span>&nbsp;<span class=keyword>function</span>&nbsp;wrapclass<span class=operator>(</span>class<span class=operator>)</span>&nbsp;<span class=keyword>return</span>&nbsp;function<span class=operator>(</span>x,&nbsp;y<span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=keyword>if</span>&nbsp;not&nbsp;y&nbsp;<span class=keyword>then</span>&nbsp;y&nbsp;<span class=operator>=</span>&nbsp;<span class=string>""</span>&nbsp;<span class=keyword>end</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table.insert<span class=operator>(</span>inserts,&nbsp;<span class=string>"&lt;span class="</span>&nbsp;..&nbsp;class&nbsp;..&nbsp;<span class=string>">"</span>&nbsp;..&nbsp;x&nbsp;..&nbsp;<span class=string>"&lt;/span>"</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=keyword>return</span>&nbsp;<span class=string>"$"</span>&nbsp;..&nbsp;<span class=operator>#</span>inserts&nbsp;..&nbsp;<span class=string>";"</span>&nbsp;..&nbsp;y<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=keyword>end</span>&nbsp;<span class=keyword>end</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=keyword>local</span>&nbsp;<span class=keyword>function</span>&nbsp;suspend<span class=operator>(</span>x<span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table.insert<span class=operator>(</span>inserts,&nbsp;x<span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=keyword>return</span>&nbsp;<span class=string>"$"</span>&nbsp;..&nbsp;<span class=operator>#</span>inserts&nbsp;..&nbsp;<span class=string>";"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=keyword>end</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=keyword>return</span>&nbsp;<span class=operator>(</span>string<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"&lt;"</span>,&nbsp;<span class=string>"&lt;"</span><span class=operator>)</span>&nbsp;..&nbsp;<span class=string>"&lt;"</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"\n"</span>,&nbsp;<span class=string>"&lt;br>"</span><span class=operator>)</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"%$"</span>,&nbsp;suspend<span class=operator>)</span><br><span class=comment>--        :gsub(<span class=string>"%$4;.-;"</span>, suspend)</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"\\\\"</span>,&nbsp;suspend<span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>'\\["<span class=escape>\'</span>]'</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"escape"</span><span class=operator>)</span><span class=operator>)</span><br><span class=comment>--        :gsub(<span class=string>"(&lt;br>%-%-.-)([\n&lt;])"</span>, wrapclass(<span class=string>"comment"</span>))</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"<span class=string>'.-'</span>"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"string"</span><span class=operator>)</span><span class=operator>)</span>:gsub<span class=operator>(</span><span class=string>'".-"'</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"string"</span><span class=operator>)</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(%-%-.-)([\n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"comment"</span><span class=operator>)</span><span class=operator>)</span><br><br><span class=comment>--        :gsub(<span class=string>"(%d+)([^;])"</span>, wrapclass(<span class=string>"number"</span>))</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"[=()#[%]+-*/{}]"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"operator"</span><span class=operator>)</span><span class=operator>)</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(elseif)([ \n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"keyword"</span><span class=operator>)</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(do)([ \n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"keyword"</span><span class=operator>)</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(in)([ \n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"keyword"</span><span class=operator>)</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(if)([ \n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"keyword"</span><span class=operator>)</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(for)([ \n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"keyword"</span><span class=operator>)</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(end)([ \n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"keyword"</span><span class=operator>)</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(else)([ \n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"keyword"</span><span class=operator>)</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(then)([ \n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"keyword"</span><span class=operator>)</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(break)([ \n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"keyword"</span><span class=operator>)</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(until)([ \n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"keyword"</span><span class=operator>)</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(local)([ \n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"keyword"</span><span class=operator>)</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(while)([ \n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"keyword"</span><span class=operator>)</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(return)([ \n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"keyword"</span><span class=operator>)</span><span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"(function)([ \n&lt;])"</span>,&nbsp;wrapclass<span class=operator>(</span><span class=string>"keyword"</span><span class=operator>)</span><span class=operator>)</span><br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>" "</span>,&nbsp;<span class=string>"&nbsp;"</span><span class=operator>)</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"$(.-);"</span>,&nbsp;<span class=keyword>function</span>&nbsp;<span class=operator>(</span>x<span class=operator>)</span>&nbsp;<span class=keyword>return</span>&nbsp;inserts<span class=operator>[</span>tonumber<span class=operator>(</span>x<span class=operator>)</span><span class=operator>]</span>&nbsp;end<span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gsub<span class=operator>(</span><span class=string>"$(.-);"</span>,&nbsp;<span class=keyword>function</span>&nbsp;<span class=operator>(</span>x<span class=operator>)</span>&nbsp;<span class=keyword>return</span>&nbsp;inserts<span class=operator>[</span>tonumber<span class=operator>(</span>x<span class=operator>)</span><span class=operator>]</span>&nbsp;end<span class=operator>)</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:sub<span class=operator>(</span>1,&nbsp;-2<span class=operator>)</span><br><br><span class=comment>-- debugging</span><br><span class=comment>--        .. <span class=string>"&lt;/pre>"</span> .. doc.wraps(doc.map(inserts, function (x) return <span class=string>"------&lt;br>"</span> .. x end ), <span class=string>"p"</span>)</span><br><span class=keyword>end</span><br><br><span class=keyword>return</span>&nbsp;M<br></pre></div></div><p><dl><dt id=M.highlight><a href=#M.highlight>M.highlight (string)</a></dt>
<dd><p> Wrap corresponding parts of Lua-Code with HTML-Spans of the classes
 <code>comment</code>, <code>string</code>, <code>escape</code>, <code>operator</code> and <code>keyword</code>. Does not really
 work with multiline comments or multiline strings, everything else should
 be fine.
<pre class=run><span class=keyword>local</span>&nbsp;highlight&nbsp;<span class=operator>=</span>&nbsp;require&nbsp;<span class=string>"highlight"</span><br><br><span class=keyword>return</span>&nbsp;highlight.highlight<span class=operator>(</span>&nbsp;<span class=operator>[</span><span class=operator>[</span><br>&nbsp;&nbsp;&nbsp;<span class=keyword>function</span>&nbsp;get<span class=operator>(</span>table,&nbsp;key<span class=operator>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=keyword>return</span>&nbsp;table<span class=operator>[</span>key<span class=operator>]</span><br>&nbsp;&nbsp;&nbsp;<span class=keyword>end</span><br><span class=operator>]</span><span class=operator>]</span>&nbsp;<span class=operator>)</span></pre><pre class=success><span class=string>"&nbsp;&nbsp;&nbsp;&lt;span class=keyword>function&lt;/span>&nbsp;get&lt;span class=operator>(&lt;/span>table,&nbsp;key&lt;span class=operator>)&lt;/span>&lt;br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span class=keyword>return&lt;/span>&nbsp;table&lt;span class=operator>[&lt;/span>key&lt;span class=operator>]&lt;/span>&lt;br>&nbsp;&nbsp;&nbsp;&lt;span class=keyword>end&lt;/span>&lt;br>"</span></pre></p></dd></dl>
  </div><div id=navigation>
<a href=index.html>> Index</a><h2> Simple Syntax Highlighting</h2><li><a href=#M.highlight>M.highlight (string)</a></li>
  </div><footer style=margin-right>
    generated with docl
  </footer></body></html>